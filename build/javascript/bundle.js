!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="/",n(n.s=12)}([function(t,n){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,n){var e={};e.EPSILON=1e-6,e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random,e.ENABLE_SIMD=!1,e.SIMD_AVAILABLE=e.ARRAY_TYPE===Float32Array&&"SIMD"in this,e.USE_SIMD=e.ENABLE_SIMD&&e.SIMD_AVAILABLE,e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t};var r=Math.PI/180;e.toRadian=function(t){return t*r},e.equals=function(t,n){return Math.abs(t-n)<=e.EPSILON*Math.max(1,Math.abs(t),Math.abs(n))},t.exports=e},function(t,n,e){(function(r){var a;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(o){"use strict";void 0!==(a=function(t){var n,a="undefined"!=typeof setTimeout&&setTimeout,o=function(t,n){return setTimeout(t,n)},i=function(t){return clearTimeout(t)},u=function(t){return a(t,0)};if(function(){return void 0!==r&&"[object process]"===Object.prototype.toString.call(r)}())u=function(t){return r.nextTick(t)};else if(n=function(){return"undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver}())u=function(t){function n(){var t=e;e=void 0,t()}var e,r=document.createTextNode("");new t(n).observe(r,{characterData:!0});var a=0;return function(t){e=t,r.data=a^=1}}(n);else if(!a){var s=e(19);o=function(t,n){return s.setTimer(n,t)},i=s.cancelTimer,u=s.runOnLoop||s.runOnContext}return{setTimer:o,clearTimer:i,asap:u}}.call(n,e,n,t))&&(t.exports=a)}(e(0))}).call(n,e(4))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(t){function n(t,n,e,r){var a=F.resolve(t);return arguments.length<2?a:a.then(n,e,r)}function r(t){return new F(t)}function a(t){return function(){for(var n=0,e=arguments.length,r=new Array(e);n<e;++n)r[n]=arguments[n];return w(t,this,r)}}function o(t){for(var n=0,e=arguments.length-1,r=new Array(e);n<e;++n)r[n]=arguments[n+1];return w(t,this,r)}function i(){return new u}function u(){function t(t){r._handler.resolve(t)}function n(t){r._handler.reject(t)}function e(t){r._handler.notify(t)}var r=F._defer();this.promise=r,this.resolve=t,this.reject=n,this.notify=e,this.resolver={resolve:t,reject:n,notify:e}}function s(t){return t&&"function"==typeof t.then}function l(){return F.all(arguments)}function c(t){return n(t,F.all)}function h(t){return n(t,F.settle)}function f(t,e){return n(t,function(t){return F.map(t,e)})}function d(t,e){return n(t,function(t){return F.filter(t,e)})}var M=e(18),v=e(20),p=e(21),x=e(22),m=e(23),S=e(24),I=e(25),y=e(26),D=e(27),b=e(5),F=[v,p,x,S,I,m,y,M,D].reduce(function(t,n){return n(t)},e(29)),w=e(7)(F);return n.promise=r,n.resolve=F.resolve,n.reject=F.reject,n.lift=a,n.try=o,n.attempt=o,n.iterate=F.iterate,n.unfold=F.unfold,n.join=l,n.all=c,n.settle=h,n.any=a(F.any),n.some=a(F.some),n.race=a(F.race),n.map=f,n.filter=d,n.reduce=a(F.reduce),n.reduceRight=a(F.reduceRight),n.isPromiseLike=s,n.Promise=F,n.defer=i,n.TimeoutError=b,n}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(c===setTimeout)return setTimeout(t,0);if((c===e||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(n){try{return c.call(null,t,0)}catch(n){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(n){try{return h.call(null,t)}catch(n){return h.call(this,t)}}}function i(){v&&d&&(v=!1,d.length?M=d.concat(M):p=-1,M.length&&u())}function u(){if(!v){var t=a(i);v=!0;for(var n=M.length;n;){for(d=M,M=[];++p<n;)d&&d[p].run();p=-1,n=M.length}d=null,v=!1,o(t)}}function s(t,n){this.fun=t,this.array=n}function l(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:e}catch(t){c=e}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var d,M=[],v=!1,p=-1;f.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];M.push(new s(t,n)),1!==M.length||v||a(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){function t(n){Error.call(this),this.message=n,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){function t(){return{state:"pending"}}function n(t){return{state:"rejected",reason:t}}function e(t){return{state:"fulfilled",value:t}}function r(r){var a=r.state();return 0===a?t():a>0?e(r.value):n(r.value)}return{pending:t,fulfilled:e,rejected:n,inspect:r}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){function t(t,e){function r(n,r,o){var i=t._defer(),u=o.length;return a({f:n,thisArg:r,args:o,params:new Array(u),i:u-1,call:e},i._handler),i}function a(n,r){if(n.i<0)return e(n.f,n.thisArg,n.params,r);t._handler(n.args[n.i]).fold(o,n,void 0,r)}function o(t,n,e){t.params[t.i]=n,t.i-=1,a(t,e)}return arguments.length<2&&(e=n),r}function n(t,n,e,r){try{r.resolve(t.apply(n,e))}catch(t){r.reject(t)}}return t.tryCatchResolve=n,t}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){n.glMatrix=e(1),n.mat2=e(35),n.mat2d=e(36),n.mat3=e(9),n.mat4=e(37),n.quat=e(38),n.vec2=e(39),n.vec3=e(10),n.vec4=e(11)},function(t,n,e){var r=e(1),a={};a.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},a.clone=function(t){var n=new r.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},a.fromValues=function(t,n,e,a,o,i,u,s,l){var c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=n,c[2]=e,c[3]=a,c[4]=o,c[5]=i,c[6]=u,c[7]=s,c[8]=l,c},a.set=function(t,n,e,r,a,o,i,u,s,l){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],a=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=a}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},a.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8],h=c*i-u*l,f=-c*o+u*s,d=l*o-i*s,M=e*h+r*f+a*d;return M?(M=1/M,t[0]=h*M,t[1]=(-c*r+a*l)*M,t[2]=(u*r-a*i)*M,t[3]=f*M,t[4]=(c*e-a*s)*M,t[5]=(-u*e+a*o)*M,t[6]=d*M,t[7]=(-l*e+r*s)*M,t[8]=(i*e-r*o)*M,t):null},a.adjoint=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8];return t[0]=i*c-u*l,t[1]=a*l-r*c,t[2]=r*u-a*i,t[3]=u*s-o*c,t[4]=e*c-a*s,t[5]=a*o-e*u,t[6]=o*l-i*s,t[7]=r*s-e*l,t[8]=e*i-r*o,t},a.determinant=function(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8];return n*(l*o-i*s)+e*(-l*a+i*u)+r*(s*a-o*u)},a.multiply=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],h=n[8],f=e[0],d=e[1],M=e[2],v=e[3],p=e[4],x=e[5],m=e[6],S=e[7],I=e[8];return t[0]=f*r+d*i+M*l,t[1]=f*a+d*u+M*c,t[2]=f*o+d*s+M*h,t[3]=v*r+p*i+x*l,t[4]=v*a+p*u+x*c,t[5]=v*o+p*s+x*h,t[6]=m*r+S*i+I*l,t[7]=m*a+S*u+I*c,t[8]=m*o+S*s+I*h,t},a.mul=a.multiply,a.translate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],h=n[8],f=e[0],d=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=f*r+d*i+l,t[7]=f*a+d*u+c,t[8]=f*o+d*s+h,t},a.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],h=n[8],f=Math.sin(e),d=Math.cos(e);return t[0]=d*r+f*i,t[1]=d*a+f*u,t[2]=d*o+f*s,t[3]=d*i-f*r,t[4]=d*u-f*a,t[5]=d*s-f*o,t[6]=l,t[7]=c,t[8]=h,t},a.scale=function(t,n,e){var r=e[0],a=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=a*n[3],t[4]=a*n[4],t[5]=a*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},a.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},a.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},a.fromQuat=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,s=a+a,l=e*i,c=r*i,h=r*u,f=a*i,d=a*u,M=a*s,v=o*i,p=o*u,x=o*s;return t[0]=1-h-M,t[3]=c-x,t[6]=f+p,t[1]=c+x,t[4]=1-l-M,t[7]=d-v,t[2]=f-p,t[5]=d+v,t[8]=1-l-h,t},a.normalFromMat4=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8],h=n[9],f=n[10],d=n[11],M=n[12],v=n[13],p=n[14],x=n[15],m=e*u-r*i,S=e*s-a*i,I=e*l-o*i,y=r*s-a*u,D=r*l-o*u,b=a*l-o*s,F=c*v-h*M,w=c*p-f*M,g=c*x-d*M,_=h*p-f*v,E=h*x-d*v,P=f*x-d*p,z=m*P-S*E+I*_+y*g-D*w+b*F;return z?(z=1/z,t[0]=(u*P-s*E+l*_)*z,t[1]=(s*g-i*P-l*w)*z,t[2]=(i*E-u*g+l*F)*z,t[3]=(a*E-r*P-o*_)*z,t[4]=(e*P-a*g+o*w)*z,t[5]=(r*g-e*E-o*F)*z,t[6]=(v*b-p*D+x*y)*z,t[7]=(p*I-M*b-x*S)*z,t[8]=(M*D-v*I+x*m)*z,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},a.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},a.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},a.equals=function(t,n){var e=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],f=n[0],d=n[1],M=n[2],v=n[3],p=n[4],x=n[5],m=t[6],S=n[7],I=n[8];return Math.abs(e-f)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-M)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-v)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-p)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-x)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(l-m)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-S)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-I)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))},t.exports=a},function(t,n,e){var r=e(1),a={};a.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var n=new r.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},a.fromValues=function(t,n,e){var a=new r.ARRAY_TYPE(3);return a[0]=t,a[1]=n,a[2]=e,a},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},a.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t},a.sub=a.subtract,a.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t},a.mul=a.multiply,a.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t},a.div=a.divide,a.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},a.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},a.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},a.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},a.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},a.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},a.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},a.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return Math.sqrt(e*e+r*r+a*a)},a.dist=a.distance,a.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return e*e+r*r+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)},a.len=a.length,a.squaredLength=function(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},a.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},a.normalize=function(t,n){var e=n[0],r=n[1],a=n[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t},a.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},a.cross=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],s=e[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t},a.lerp=function(t,n,e,r){var a=n[0],o=n[1],i=n[2];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t},a.hermite=function(t,n,e,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,l=i*(o-1),c=i*(3-2*o);return t[0]=n[0]*u+e[0]*s+r[0]*l+a[0]*c,t[1]=n[1]*u+e[1]*s+r[1]*l+a[1]*c,t[2]=n[2]*u+e[2]*s+r[2]*l+a[2]*c,t},a.bezier=function(t,n,e,r,a,o){var i=1-o,u=i*i,s=o*o,l=u*i,c=3*o*u,h=3*s*i,f=s*o;return t[0]=n[0]*l+e[0]*c+r[0]*h+a[0]*f,t[1]=n[1]*l+e[1]*c+r[1]*h+a[1]*f,t[2]=n[2]*l+e[2]*c+r[2]*h+a[2]*f,t},a.random=function(t,n){n=n||1;var e=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,o=Math.sqrt(1-a*a)*n;return t[0]=Math.cos(e)*o,t[1]=Math.sin(e)*o,t[2]=a*n,t},a.transformMat4=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[3]*r+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/i,t},a.transformMat3=function(t,n,e){var r=n[0],a=n[1],o=n[2];return t[0]=r*e[0]+a*e[3]+o*e[6],t[1]=r*e[1]+a*e[4]+o*e[7],t[2]=r*e[2]+a*e[5]+o*e[8],t},a.transformQuat=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],s=e[2],l=e[3],c=l*r+u*o-s*a,h=l*a+s*r-i*o,f=l*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=c*l+d*-i+h*-s-f*-u,t[1]=h*l+d*-u+f*-i-c*-s,t[2]=f*l+d*-s+c*-u-h*-i,t},a.rotateX=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},a.rotateY=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},a.rotateZ=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},a.forEach=function(){var t=a.create();return function(n,e,r,a,o,i){var u,s;for(e||(e=3),r||(r=0),s=a?Math.min(a*e+r,n.length):n.length,u=r;u<s;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2];return n}}(),a.angle=function(t,n){var e=a.fromValues(t[0],t[1],t[2]),r=a.fromValues(n[0],n[1],n[2]);a.normalize(e,e),a.normalize(r,r);var o=a.dot(e,r);return o>1?0:Math.acos(o)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},a.equals=function(t,n){var e=t[0],a=t[1],o=t[2],i=n[0],u=n[1],s=n[2];return Math.abs(e-i)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},t.exports=a},function(t,n,e){var r=e(1),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var n=new r.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},a.fromValues=function(t,n,e,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=n,o[2]=e,o[3]=a,o},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},a.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t},a.sub=a.subtract,a.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t},a.mul=a.multiply,a.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t},a.div=a.divide,a.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},a.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},a.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},a.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},a.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},a.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},a.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},a.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(t){var n=t[0],e=t[1],r=t[2],a=t[3];return Math.sqrt(n*n+e*e+r*r+a*a)},a.len=a.length,a.squaredLength=function(t){var n=t[0],e=t[1],r=t[2],a=t[3];return n*n+e*e+r*r+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},a.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},a.normalize=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t},a.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},a.lerp=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t[3]=u+r*(e[3]-u),t},a.random=function(t,n){return n=n||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),a.normalize(t,t),a.scale(t,t,n),t},a.transformMat4=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3];return t[0]=e[0]*r+e[4]*a+e[8]*o+e[12]*i,t[1]=e[1]*r+e[5]*a+e[9]*o+e[13]*i,t[2]=e[2]*r+e[6]*a+e[10]*o+e[14]*i,t[3]=e[3]*r+e[7]*a+e[11]*o+e[15]*i,t},a.transformQuat=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],s=e[2],l=e[3],c=l*r+u*o-s*a,h=l*a+s*r-i*o,f=l*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=c*l+d*-i+h*-s-f*-u,t[1]=h*l+d*-u+f*-i-c*-s,t[2]=f*l+d*-s+c*-u-h*-i,t[3]=n[3],t},a.forEach=function(){var t=a.create();return function(n,e,r,a,o,i){var u,s;for(e||(e=4),r||(r=0),s=a?Math.min(a*e+r,n.length):n.length,u=r;u<s;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],t[3]=n[u+3],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2],n[u+3]=t[3];return n}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},a.equals=function(t,n){var e=t[0],a=t[1],o=t[2],i=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return Math.abs(e-u)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=a},function(t,n,e){e(13),t.exports=e(15)},function(t,n,e){"use strict";var r=e(14);!function(t){t&&t.__esModule}(r)},function(t,n){},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var a=e(16),o=(function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);n.default=t}(a),e(17)),i=(r(o),e(32));r(i)},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();window.STORAGE={};n.FrameRateUI=function(){function t(n){r(this,t),this.options=n,this.mainContainer=document.querySelector("body"),this.subContainer=document.createElement("div"),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.rawFps=0,this.displayedFps=60,this.lastLoop=new Date,this.flag={frameRate:[],graph:[]},this.init()}return a(t,[{key:"init",value:function(){this.canvas.width=150,this.canvas.height=180,this.canvas.style.backgroundColor="#2C302E",this.subContainer.style.position="fixed",this.subContainer.style.zIndex="100",this.subContainer.classList.add("fps"),this.subContainer.appendChild(this.canvas),this.mainContainer.appendChild(this.subContainer),this.draw()}},{key:"draw",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.display_number(),this.display_graph()}},{key:"raw_to_displayed",value:function(){if(this.flag.frameRate.push(this.rawFps),this.flag.frameRate.length>29){for(var t=0,n=0;n<this.flag.frameRate.length;n++)t+=this.flag.frameRate[n];this.displayedFps=Math.round(t/this.flag.frameRate.length),this.flag.frameRate=[],this.draw()}}},{key:"display_graph",value:function(){var t=(this.displayedFps,this.rawFps/60);this.flag.graph.push({ratio:t,fps:this.rawFps}),this.flag.graph.length>49&&this.flag.graph.shift();for(var n=0;n<this.flag.graph.length;n++){var e=n/50,r=this.flag.graph[n];this.draw_stats(e,r.ratio,r.fps)}}},{key:"draw_stats",value:function(t,n,e){var r=this.context;r.strokeStyle=this.color_selector(e),r.lineWidth=1,r.beginPath(),r.moveTo(0,100*t),r.lineTo(150*n-20,100*t),r.stroke(),r.stroke(),r.closePath()}},{key:"display_number",value:function(){var t=this.context,n=this.displayedFps,e=this.rawFps;t.font="20px Arial",t.fillStyle=this.color_selector(n),t.fillText(n,this.canvas.width/2-10,this.canvas.height-50),t.fillStyle="white",t.fillText("fps :",this.canvas.width/2-60,this.canvas.height-50),t.fillStyle=this.color_selector(n),t.fillText(e,this.canvas.width/2+25,this.canvas.height-20),t.fillStyle="white",t.fillText("raw fps :",this.canvas.width/2-60,this.canvas.height-20)}},{key:"color_selector",value:function(t){return t<20?"#E86252":t<30?"#DBD56E":t<50?"#596157":t<200?"#5B8C5A":void 0}},{key:"update",value:function(){var t=new Date;this.rawFps=Math.round(1e3/(t-this.lastLoop)),this.lastLoop=t,this.raw_to_displayed()}},{key:"hide",value:function(){this.subContainer.style.display="none"}},{key:"show",value:function(){this.subContainer.style.display="block"}},{key:"toggleShow",value:function(){"none"==this.subContainer.style.display?this.subContainer.style.display="block":this.subContainer.style.display="none"}}]),t}(),n.AudioAnalyzer=function(){function t(n){r(this,t),this.options=n||new Object,this.debug=this.options.debug||!0,this.audioElement=this.options.audioElement||void 0,this.url=this.options.url,this.samplingFrequency=this.options.samplingFrequency,this.mainContainer=document.querySelector("body"),this.container=document.createElement("div"),this.canvas=document.createElement("canvas"),this.width=400,this.height=100,this.context=this.canvas.getContext("2d"),this.audio,this.dataArray,this.loaded=!1,this.bufferLength,this.controls=[],this.init(),this.options.debug||this.hide()}return a(t,[{key:"init",value:function(){this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#2C302E",this.container.style.position="fixed",this.container.style.bottom=0,this.container.style.left=0,this.container.style.zIndex="100",this.container.appendChild(this.canvas),this.container.classList.add("spectrum"),this.mainContainer.appendChild(this.container),void 0!=this.audioElement?this.audio=this.audioElement:(this.audio=new Audio,this.audio.src=this.url,this.audio.controls=this.options.playerUI,this.audio.autoplay=this.options.autoplay,this.audio.crossOrigin="anonymous"),this.audio.controls&&(this.canvas.style.paddingBottom="28px",this.audio.style.position="absolute",this.audio.style.bottom=0,this.audio.style.left=0,this.audio.style.width=this.width+"px"),this.container.appendChild(this.audio),this.audio.context=new(window.AudioContext||window.webkitAudioContext);var t=this;this.analyser=this.audio.context.createAnalyser(),this.analyser.minDecibels=-90,this.analyser.maxDecibels=-10,this.analyser.smoothingTimeConstant=.85,this.analyser.fftSize=this.samplingFrequency,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),t.audio.context.createMediaElementSource(t.audio).connect(t.analyser),t.analyser.connect(t.audio.context.destination),t.loaded=!0}},{key:"addControlPoint",value:function(t){var n=new Object;if(t.bufferPosition>this.bufferLength)console.error(n," : the frequency cannot be superior to the buffer size");else{var e=this;n.frequency=t.bufferPosition,this.debug&&console.log("New audio control point created at buffer position",n.frequency),n._data={position:{x:0,y:0},radius:this.width/4/this.bufferLength*2.5},n.strength=0,n.id=this.controls.length,n.shift=function(t){void 0!=t&&(e.controls[n.id].frequency=t,console.log("Audio control (id : "+n.id+") point shifted at buffer position ",t))},this.controls.push(n)}}},{key:"updateControlPoint",value:function(){for(var t=this.context,n=0;n<this.controls.length;n++){var e=this.controls[n];Math.round(e.frequency/2);e._data.position.x=e.frequency*(this.width/4/this.bufferLength*2.5+1),e.strength=this.dataArray[e.frequency]/255,e._data.position.y=this.height-100*e.strength,t.beginPath(),t.fillStyle="white",t.arc(e._data.position.x,e._data.position.y,2.5*e._data.radius,0,2*Math.PI),t.fill(),t.stroke()}}},{key:"update",value:function(){var t=this.context;t.clearRect(0,0,this.width,this.width),this.analyser.getByteFrequencyData(this.dataArray);for(var n,e=this.width/4/this.bufferLength*2.5,r=0,a=0;a<this.bufferLength;a++)n=this.dataArray[a],t.fillStyle="rgb("+(n+this.height)+",50,50)",t.fillRect(r,this.height-n/2,e,n/2),r+=e+1;t.font="12px Arial",t.fillStyle="white",t.fillText("Buffer Size: "+this.bufferLength,this.width-110,30),this.updateControlPoint()}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.subContainer.style.display="block"}},{key:"toggleShow",value:function(){"none"==this.container.style.display?this.container.style.display="block":this.container.style.display="none"}},{key:"play",value:function(){this.audio.play()}}]),t}();Math.easing={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=e(3),i=function(t){return t&&t.__esModule?t:{default:t}}(o);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var u=function(){function t(){r(this,t),this.width=128,this.height=128,this.canvas=document.createElement("canvas"),this.video=document.createElement("video"),this.active=!1,this.defer=i.default.defer(),this.framerate=30,this.targetFps=1/this.framerate,this.ellapsed=0,this.prevPixels=new Uint8ClampedArray(this.width*this.height),this.currentPixel=new Uint8ClampedArray(this.width*this.height),this.velocityMap=new Uint8ClampedArray(this.width*this.height),this.init()}return a(t,[{key:"init",value:function(){var t=this;document.body.appendChild(this.canvas),this.canvas.classList.add("camvelocity"),this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"),navigator.mediaDevices.getUserMedia({audio:!1,video:{width:1280,height:720}}).then(function(n){t.video.src=window.URL.createObjectURL(n),t.video.onloadedmetadata=function(n){t.video.play()},t.video.play(),t.onloaded()}).catch(function(t){alert("No cam detected... ðŸ˜¢")})}},{key:"onloaded",value:function(){this.active=!0}},{key:"getLoadable",value:function(){return this.defer.promise}},{key:"toGreyScale",value:function(){for(var t=this.ctx.getImageData(0,0,this.width,this.height),n=t.data,e=0,r=n.length;e<r;e+=4){var a=.3*n[e]+.59*n[e+1]+.11*n[e+2];n[e+0]=a,n[e+1]=a,n[e+2]=a}this.ctx.putImageData(t,0,0)}},{key:"processPixels",value:function(){for(var t=this.ctx.getImageData(0,0,this.width,this.height),n=t.data,e=0,r=n.length;e<r;e+=4)this.currentPixel[e/4]=n[e];for(var a=0,o=n.length;a<o;a+=4){var i=Math.abs(this.prevPixels[a/4]-this.currentPixel[a/4]);n[a+0]=i,n[a+1]=i,n[a+2]=i}this.ctx.putImageData(t,0,0)}},{key:"update",value:function(){this.active&&(this.ctx.drawImage(this.video,0,0,this.width,this.height),this.toGreyScale(),this.processPixels(),this.prevPixels=this.currentPixel.slice(0))}}]),t}(),s=new u;n.default=s},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(t){function n(t,n,e,a){return r.setTimer(function(){t(e,a,n)},n)}var r=e(2),a=e(5);return function(t){function e(t,e,r){n(o,t,e,r)}function o(t,n){n.resolve(t)}function i(t,n,e){var r=void 0===t?new a("timed out after "+e+"ms"):t;n.reject(r)}return t.prototype.delay=function(t){var n=this._beget();return this._handler.fold(e,t,void 0,n._handler),n},t.prototype.timeout=function(t,e){var a=this._beget(),o=a._handler,u=n(i,t,e,a._handler);return this._handler.visit(o,function(t){r.clearTimer(u),this.resolve(t)},function(t){r.clearTimer(u),this.reject(t)},o.notify),a},t}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n){},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(t){var n=e(6),r=e(7);return function(t){function e(n){function e(t){c=null,this.resolve(t)}function r(t){this.resolved||(c.push(t),0==--l&&this.reject(c))}for(var a,o,i=t._defer(),u=i._handler,s=n.length>>>0,l=s,c=[],h=0;h<s;++h)if(void 0!==(o=n[h])||h in n){if(a=t._handler(o),a.state()>0){u.become(a),t._visitRemaining(n,h,a);break}a.visit(u,e,r)}else--l;return 0===l&&u.reject(new RangeError("any(): array must not be empty")),i}function a(n,e){function r(t){this.resolved||(c.push(t),0==--d&&(h=null,this.resolve(c)))}function a(t){this.resolved||(h.push(t),0==--o&&(c=null,this.reject(h)))}var o,i,u,s=t._defer(),l=s._handler,c=[],h=[],f=n.length>>>0,d=0;for(u=0;u<f;++u)(void 0!==(i=n[u])||u in n)&&++d;for(e=Math.max(e,0),o=d-e+1,d=Math.min(e,d),e>d?l.reject(new RangeError("some(): array must contain at least "+e+" item(s), but had "+d)):0===d&&l.resolve(c),u=0;u<f;++u)(void 0!==(i=n[u])||u in n)&&t._handler(i).visit(l,r,a,l.notify);return s}function o(n,e){return t._traverse(e,n)}function i(n,e){var r=m.call(n);return t._traverse(e,r).then(function(t){return u(r,t)})}function u(n,e){for(var r=e.length,a=new Array(r),o=0,i=0;o<r;++o)e[o]&&(a[i++]=t._handler(n[o]).value);return a.length=i,a}function s(t){return v(t.map(l))}function l(e){var r;return e instanceof t&&(r=e._handler.join()),r&&0===r.state()||!r?M(e).then(n.fulfilled,n.rejected):(r._unreport(),n.inspect(r))}function c(t,n){return arguments.length>2?p.call(t,f(n),arguments[2]):p.call(t,f(n))}function h(t,n){return arguments.length>2?x.call(t,f(n),arguments[2]):x.call(t,f(n))}function f(t){return function(n,e,r){return d(t,void 0,[n,e,r])}}var d=r(t),M=t.resolve,v=t.all,p=Array.prototype.reduce,x=Array.prototype.reduceRight,m=Array.prototype.slice;return t.any=e,t.some=a,t.settle=s,t.map=o,t.filter=i,t.reduce=c,t.reduceRight=h,t.prototype.spread=function(t){return this.then(v).then(function(n){return t.apply(this,n)})},t}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){function t(){throw new TypeError("catch predicate must be a function")}function n(t,n){return e(n)?t instanceof n:n(t)}function e(t){return t===Error||null!=t&&t.prototype instanceof Error}function r(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function a(t){return t}return function(e){function o(t,e){return function(r){return n(r,e)?t.call(this,r):l(r)}}function i(t,n,e,a){var o=t.call(n);return r(o)?u(o,e,a):e(a)}function u(t,n,e){return s(t).then(function(){return n(e)})}var s=e.resolve,l=e.reject,c=e.prototype.catch;return e.prototype.done=function(t,n){this._handler.visit(this._handler.receiver,t,n)},e.prototype.catch=e.prototype.otherwise=function(n){return arguments.length<2?c.call(this,n):"function"!=typeof n?this.ensure(t):c.call(this,o(arguments[1],n))},e.prototype.finally=e.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(n){return i(t,this,a,n)},function(n){return i(t,this,l,n)})},e.prototype.else=e.prototype.orElse=function(t){return this.then(void 0,function(){return t})},e.prototype.yield=function(t){return this.then(function(){return t})},e.prototype.tap=function(t){return this.then(t).yield(this)},e}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){return function(t){return t.prototype.fold=function(n,e){var r=this._beget();return this._handler.fold(function(e,r,a){t._handler(e).fold(function(t,e,r){r.resolve(n.call(this,e,t))},r,this,a)},e,r._handler.receiver,r._handler),r},t}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(t){var n=e(6).inspect;return function(t){return t.prototype.inspect=function(){return n(t._handler(this))},t}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){return function(t){function n(t,n,r,a){return e(function(n){return[n,t(n)]},n,r,a)}function e(t,n,a,o){function i(o,i){return r(a(o)).then(function(){return e(t,n,a,i)})}return r(o).then(function(e){return r(n(e)).then(function(n){return n?e:r(t(e)).spread(i)})})}var r=t.resolve;return t.iterate=n,t.unfold=e,t}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){return function(t){return t.prototype.with=t.prototype.withThis=function(t){var n=this._beget(),e=n._handler;return e.receiver=t,this._handler.chain(e,t),n},t}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(t){function n(t){throw t}function r(){}var a=e(2).setTimer,o=e(28);return function(t){function e(t){t.handled||(d.push(t),c("Potentially unhandled rejection ["+t.id+"] "+o.formatError(t.value)))}function i(t){var n=d.indexOf(t);n>=0&&(d.splice(n,1),h("Handled previous rejection ["+t.id+"] "+o.formatObject(t.value)))}function u(t,n){f.push(t,n),null===M&&(M=a(s,0))}function s(){for(M=null;f.length>0;)f.shift()(f.shift())}var l,c=r,h=r;"undefined"!=typeof console&&(l=console,c=void 0!==l.error?function(t){l.error(t)}:function(t){l.log(t)},h=void 0!==l.info?function(t){l.info(t)}:function(t){l.log(t)}),t.onPotentiallyUnhandledRejection=function(t){u(e,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){u(i,t)},t.onFatalRejection=function(t){u(n,t.value)};var f=[],d=[],M=null;return t}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){function t(t){var e="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:n(t);return t instanceof Error?e:e+" (WARNING: non-Error used)"}function n(t){var n=String(t);return"[object Object]"===n&&"undefined"!=typeof JSON&&(n=e(t,n)),n}function e(t,n){try{return JSON.stringify(t)}catch(t){return n}}return{formatError:t,formatObject:n,tryStringify:e}}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(t){return e(30)({scheduler:new(e(31))(e(2).asap)})}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){(function(r){var a;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(o){"use strict";void 0!==(a=function(){return function(t){function n(t,n){this._handler=t===I?n:e(t)}function e(t){function n(t){a.resolve(t)}function e(t){a.reject(t)}function r(t){a.notify(t)}var a=new D;try{t(n,e,r)}catch(t){e(t)}return a}function a(t){return O(t)?t:new n(I,new b(x(t)))}function o(t){return new n(I,new b(new g(t)))}function i(){return nt}function u(){return new n(I,new D)}function s(t,n){return new n(I,new D(t.receiver,t.join().context))}function l(t){return h(X,null,t)}function c(t,n){return h(N,t,n)}function h(t,e,r){function a(n,a,i){i.resolved||f(r,o,n,t(e,a,n),i)}function o(t,n,e){c[t]=n,0==--l&&e.become(new w(c))}for(var i,u="function"==typeof e?a:o,s=new D,l=r.length>>>0,c=new Array(l),h=0;h<r.length&&!s.resolved;++h)i=r[h],void 0!==i||h in r?f(r,u,h,i,s):--l;return 0===l&&s.become(new w(c)),new n(I,s)}function f(t,n,e,r,a){if(j(r)){var o=m(r),i=o.state();0===i?o.fold(n,e,void 0,a):i>0?n(e,o.value,a):(a.become(o),d(t,e+1,o))}else n(e,r,a)}function d(t,n,e){for(var r=n;r<t.length;++r)M(x(t[r]),e)}function M(t,n){if(t!==n){var e=t.state();0===e?t.visit(t,void 0,t._unreport):e<0&&t._unreport()}}function v(t){return"object"!=typeof t||null===t?o(new TypeError("non-iterable passed to race()")):0===t.length?i():1===t.length?a(t[0]):p(t)}function p(t){var e,r,a,o=new D;for(e=0;e<t.length;++e)if(void 0!==(r=t[e])||e in t){if(a=x(r),0!==a.state()){o.become(a),d(t,e+1,a);break}a.visit(o,o.resolve,o.reject)}return new n(I,o)}function x(t){return O(t)?t._handler.join():j(t)?S(t):new w(t)}function m(t){return O(t)?t._handler.join():S(t)}function S(t){try{var n=t.then;return"function"==typeof n?new F(n,t):new w(t)}catch(t){return new g(t)}}function I(){}function y(){}function D(t,e){n.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function b(t){this.handler=t}function F(t,n){D.call(this),Z.enqueue(new A(t,n,this))}function w(t){n.createContext(this),this.value=t}function g(t){n.createContext(this),this.id=++$,this.value=t,this.handled=!1,this.reported=!1,this._report()}function _(t,n){this.rejection=t,this.context=n}function E(t){this.rejection=t}function P(){return new g(new TypeError("Promise cycle"))}function z(t,n){this.continuation=t,this.handler=n}function R(t,n){this.handler=n,this.value=t}function A(t,n,e){this._then=t,this.thenable=n,this.resolver=e}function T(t,n,e,r,a){try{t.call(n,e,r,a)}catch(t){r(t)}}function L(t,n,e,r){this.f=t,this.z=n,this.c=e,this.to=r,this.resolver=K,this.receiver=this}function O(t){return t instanceof n}function j(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function q(t,e,r,a){if("function"!=typeof t)return a.become(e);n.enterContext(e),Y(t,e.value,r,a),n.exitContext()}function C(t,e,r,a,o){if("function"!=typeof t)return o.become(r);n.enterContext(r),U(t,e,r.value,a,o),n.exitContext()}function k(t,e,r,a,o){if("function"!=typeof t)return o.notify(e);n.enterContext(r),Q(t,e,a,o),n.exitContext()}function N(t,n,e){try{return t(n,e)}catch(t){return o(t)}}function Y(t,n,e,r){try{r.become(x(t.call(e,n)))}catch(t){r.become(new g(t))}}function U(t,n,e,r,a){try{t.call(r,n,e,a)}catch(t){a.become(new g(t))}}function Q(t,n,e,r){try{r.notify(t.call(e,n))}catch(t){r.notify(t)}}function V(t,n){n.prototype=J(t.prototype),n.prototype.constructor=n}function X(t,n){return n}function B(){}function G(){if("function"==typeof CustomEvent)try{return new CustomEvent("unhandledRejection")instanceof CustomEvent}catch(t){}return!1}function W(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{return document.createEvent("CustomEvent").initCustomEvent("eventType",!1,!0,{}),!0}catch(t){}return!1}var Z=t.scheduler,H=function(){return void 0!==r&&null!==r&&"function"==typeof r.emit?function(t,n){return"unhandledRejection"===t?r.emit(t,n.value,n):r.emit(t,n)}:"undefined"!=typeof self&&G()?function(t,n){return function(e,r){var a=new n(e,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!t.dispatchEvent(a)}}(self,CustomEvent):"undefined"!=typeof self&&W()?function(t,n){return function(e,r){var a=n.createEvent("CustomEvent");return a.initCustomEvent(e,!1,!0,{reason:r.value,key:r}),!t.dispatchEvent(a)}}(self,document):B}(),J=Object.create||function(t){function n(){}return n.prototype=t,new n};n.resolve=a,n.reject=o,n.never=i,n._defer=u,n._handler=x,n.prototype.then=function(t,n,e){var r=this._handler,a=r.join().state();if("function"!=typeof t&&a>0||"function"!=typeof n&&a<0)return new this.constructor(I,r);var o=this._beget(),i=o._handler;return r.chain(i,r.receiver,t,n,e),o},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype._beget=function(){return s(this._handler,this.constructor)},n.all=l,n.race=v,n._traverse=c,n._visitRemaining=d,I.prototype.when=I.prototype.become=I.prototype.notify=I.prototype.fail=I.prototype._unreport=I.prototype._report=B,I.prototype._state=0,I.prototype.state=function(){return this._state},I.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},I.prototype.chain=function(t,n,e,r,a){this.when({resolver:t,receiver:n,fulfilled:e,rejected:r,progress:a})},I.prototype.visit=function(t,n,e,r){this.chain(K,t,n,e,r)},I.prototype.fold=function(t,n,e,r){this.when(new L(t,n,e,r))},V(I,y),y.prototype.become=function(t){t.fail()};var K=new y;V(I,D),D.prototype._state=0,D.prototype.resolve=function(t){this.become(x(t))},D.prototype.reject=function(t){this.resolved||this.become(new g(t))},D.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if((t=t.handler)===this)return this.handler=P();return t},D.prototype.run=function(){var t=this.consumers,n=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var e=0;e<t.length;++e)n.when(t[e])},D.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&Z.enqueue(this),void 0!==this.context&&t._report(this.context))},D.prototype.when=function(t){this.resolved?Z.enqueue(new z(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},D.prototype.notify=function(t){this.resolved||Z.enqueue(new R(t,this))},D.prototype.fail=function(t){var n=void 0===t?this.context:t;this.resolved&&this.handler.join().fail(n)},D.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},D.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},V(I,b),b.prototype.when=function(t){Z.enqueue(new z(t,this))},b.prototype._report=function(t){this.join()._report(t)},b.prototype._unreport=function(){this.join()._unreport()},V(D,F),V(I,w),w.prototype._state=1,w.prototype.fold=function(t,n,e,r){C(t,n,this,e,r)},w.prototype.when=function(t){q(t.fulfilled,this,t.receiver,t.resolver)};var $=0;V(I,g),g.prototype._state=-1,g.prototype.fold=function(t,n,e,r){r.become(this)},g.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),q(t.rejected,this,t.receiver,t.resolver)},g.prototype._report=function(t){Z.afterQueue(new _(this,t))},g.prototype._unreport=function(){this.handled||(this.handled=!0,Z.afterQueue(new E(this)))},g.prototype.fail=function(t){this.reported=!0,H("unhandledRejection",this),n.onFatalRejection(this,void 0===t?this.context:t)},_.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,H("unhandledRejection",this.rejection)||n.onPotentiallyUnhandledRejection(this.rejection,this.context))},E.prototype.run=function(){this.rejection.reported&&(H("rejectionHandled",this.rejection)||n.onPotentiallyUnhandledRejectionHandled(this.rejection))},n.createContext=n.enterContext=n.exitContext=n.onPotentiallyUnhandledRejection=n.onPotentiallyUnhandledRejectionHandled=n.onFatalRejection=B;var tt=new I,nt=new n(I,tt);return z.prototype.run=function(){this.handler.join().when(this.continuation)},R.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var n,e=0;e<t.length;++e)n=t[e],k(n.progress,this.value,this.handler,n.receiver,n.resolver)},A.prototype.run=function(){function t(t){r.resolve(t)}function n(t){r.reject(t)}function e(t){r.notify(t)}var r=this.resolver;T(this._then,this.thenable,t,n,e)},L.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},L.prototype.rejected=function(t){this.to.reject(t)},L.prototype.progress=function(t){this.to.notify(t)},n}}.call(n,e,n,t))&&(t.exports=a)}(e(0))}).call(n,e(4))},function(t,n,e){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";void 0!==(r=function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var n=this;this.drain=function(){n._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t}.call(n,e,n,t))&&(t.exports=r)}(e(0))},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(33),u=r(i),s=e(34),l=r(s),c=e(40),h=r(c),f=e(41),d=r(f),M=e(8),v=r(M),p=(v.default.mat4,v.default.quat,v.default.vec3),x=function(){function t(){a(this,t),this.width=window.innerWidth,this.height=window.innerHeight,this.active=!1,this.time=0,this.canvas=document.createElement("canvas"),this.catchContext(),d.default.init(this),this.loadTexture(),this.camera=new l.default(this,45),this.orbit=new h.default(this)}return o(t,[{key:"catchContext",value:function(){document.querySelector("#container").appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.gl=this.canvas.getContext("webgl2",{antialias:!0}),this.gl}},{key:"loadTexture",value:function(){var t=this;d.default.load(u.default.testTexture,"testTexture").then(d.default.load(u.default.heightMap,"heightMap")).then(function(){t.active=!0})}},{key:"render",value:function(){if(this.active){this.time+=.01;var t=this.gl;t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.viewport(0,0,this.width,this.height),this.orbit.update(),this.camera.update(),this.camera.lookAt(p.fromValues(0,0,0))}}}]),t}(),m=new x;n.default=m},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={testTexture:"assets/UV_Grid.jpg",heightMap:"assets/heightMap.png"}},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=e(8),i=function(t){return t&&t.__esModule?t:{default:t}}(o),u=i.default.vec3,s=i.default.mat4,l=i.default.quat,c=function(){function t(n,e){r(this,t),this.scene=n,this.gl=n.gl,this.fov=e,this.position=u.fromValues(0,10,-10),this.rotation=u.fromValues(0,0,0),this.quaternion=l.create(),this.pMatrix=s.create(),this.vMatrix=s.create()}return a(t,[{key:"updatePositionMatrix",value:function(){this.gl;s.identity(this.vMatrix),this.quaternion=l.create(),l.rotateX(this.quaternion,this.quaternion,this.rotation[0]),l.rotateY(this.quaternion,this.quaternion,this.rotation[1]),l.rotateZ(this.quaternion,this.quaternion,this.rotation[2]),s.fromRotationTranslationScale(this.vMatrix,this.quaternion,this.position,[1,1,1])}},{key:"lookAt",value:function(t){s.lookAt(this.vMatrix,this.position,t,[0,1,0])}},{key:"getProjectionMatrix",value:function(){return this.pMatrix}},{key:"getViewMatrix",value:function(){return this.vMatrix}},{key:"updateProjection",value:function(){var t=this.gl;s.perspective(this.pMatrix,this.fov*Math.PI/180,t.getParameter(t.VIEWPORT)[2]/t.getParameter(t.VIEWPORT)[3],.1,100)}},{key:"update",value:function(){this.updatePositionMatrix(),this.updateProjection()}}]),t}();n.default=c},function(t,n,e){var r=e(1),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var n=new r.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,n,e,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=n,o[2]=e,o[3]=a,o},a.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},a.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},a.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=e*i,t):null},a.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],s=e[1],l=e[2],c=e[3];return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=r*l+o*c,t[3]=a*l+i*c,t},a.mul=a.multiply,a.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),s=Math.cos(e);return t[0]=r*s+o*u,t[1]=a*s+i*u,t[2]=r*-u+o*s,t[3]=a*-u+i*s,t},a.scale=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],s=e[1];return t[0]=r*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},a.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t},a.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t},a.sub=a.subtract,a.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},a.equals=function(t,n){var e=t[0],a=t[1],o=t[2],i=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return Math.abs(e-u)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},a.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},a.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},t.exports=a},function(t,n,e){var r=e(1),a={};a.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var n=new r.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,n,e,a,o,i){var u=new r.ARRAY_TYPE(6);return u[0]=t,u[1]=n,u[2]=e,u[3]=a,u[4]=o,u[5]=i,u},a.set=function(t,n,e,r,a,o,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},a.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=e*o-r*a;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-a*s,t[3]=e*s,t[4]=(a*u-o*i)*s,t[5]=(r*i-e*u)*s,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=e[0],c=e[1],h=e[2],f=e[3],d=e[4],M=e[5];return t[0]=r*l+o*c,t[1]=a*l+i*c,t[2]=r*h+o*f,t[3]=a*h+i*f,t[4]=r*d+o*M+u,t[5]=a*d+i*M+s,t},a.mul=a.multiply,a.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=Math.sin(e),c=Math.cos(e);return t[0]=r*c+o*l,t[1]=a*c+i*l,t[2]=r*-l+o*c,t[3]=a*-l+i*c,t[4]=u,t[5]=s,t},a.scale=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=e[0],c=e[1];return t[0]=r*l,t[1]=a*l,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=s,t},a.translate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=e[0],c=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*l+o*c+u,t[5]=a*l+i*c+s,t},a.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t},a.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t},a.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t},a.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},a.equals=function(t,n){var e=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1],h=n[2],f=n[3],d=n[4],M=n[5];return Math.abs(e-l)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-h)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-M)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))},t.exports=a},function(t,n,e){var r=e(1),a={scalar:{},SIMD:{}};a.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var n=new r.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},a.fromValues=function(t,n,e,a,o,i,u,s,l,c,h,f,d,M,v,p){var x=new r.ARRAY_TYPE(16);return x[0]=t,x[1]=n,x[2]=e,x[3]=a,x[4]=o,x[5]=i,x[6]=u,x[7]=s,x[8]=l,x[9]=c,x[10]=h,x[11]=f,x[12]=d,x[13]=M,x[14]=v,x[15]=p,x},a.set=function(t,n,e,r,a,o,i,u,s,l,c,h,f,d,M,v,p){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t[9]=c,t[10]=h,t[11]=f,t[12]=d,t[13]=M,t[14]=v,t[15]=p,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},a.SIMD.transpose=function(t,n){var e,r,a,o,i,u,s,l,c,h;return e=SIMD.Float32x4.load(n,0),r=SIMD.Float32x4.load(n,4),a=SIMD.Float32x4.load(n,8),o=SIMD.Float32x4.load(n,12),i=SIMD.Float32x4.shuffle(e,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),s=SIMD.Float32x4.shuffle(i,u,0,2,4,6),l=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),i=SIMD.Float32x4.shuffle(e,r,2,3,6,7),u=SIMD.Float32x4.shuffle(a,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),h=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,h),t},a.transpose=r.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8],h=n[9],f=n[10],d=n[11],M=n[12],v=n[13],p=n[14],x=n[15],m=e*u-r*i,S=e*s-a*i,I=e*l-o*i,y=r*s-a*u,D=r*l-o*u,b=a*l-o*s,F=c*v-h*M,w=c*p-f*M,g=c*x-d*M,_=h*p-f*v,E=h*x-d*v,P=f*x-d*p,z=m*P-S*E+I*_+y*g-D*w+b*F;return z?(z=1/z,t[0]=(u*P-s*E+l*_)*z,t[1]=(a*E-r*P-o*_)*z,t[2]=(v*b-p*D+x*y)*z,t[3]=(f*D-h*b-d*y)*z,t[4]=(s*g-i*P-l*w)*z,t[5]=(e*P-a*g+o*w)*z,t[6]=(p*I-M*b-x*S)*z,t[7]=(c*b-f*I+d*S)*z,t[8]=(i*E-u*g+l*F)*z,t[9]=(r*g-e*E-o*F)*z,t[10]=(M*D-v*I+x*m)*z,t[11]=(h*I-c*D-d*m)*z,t[12]=(u*w-i*_-s*F)*z,t[13]=(e*_-r*w+a*F)*z,t[14]=(v*S-M*y-p*m)*z,t[15]=(c*y-h*S+f*m)*z,t):null},a.SIMD.invert=function(t,n){var e,r,a,o,i,u,s,l,c,h,f=SIMD.Float32x4.load(n,0),d=SIMD.Float32x4.load(n,4),M=SIMD.Float32x4.load(n,8),v=SIMD.Float32x4.load(n,12);return i=SIMD.Float32x4.shuffle(f,d,0,1,4,5),r=SIMD.Float32x4.shuffle(M,v,0,1,4,5),e=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,d,2,3,6,7),o=SIMD.Float32x4.shuffle(M,v,2,3,6,7),a=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(r,i),s=SIMD.Float32x4.mul(e,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(e,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),l=SIMD.Float32x4.mul(e,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(e,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(e,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(e,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),c),h=SIMD.Float32x4.mul(e,u),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),i=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(i,i))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,c)),t):null},a.invert=r.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8],h=n[9],f=n[10],d=n[11],M=n[12],v=n[13],p=n[14],x=n[15];return t[0]=u*(f*x-d*p)-h*(s*x-l*p)+v*(s*d-l*f),t[1]=-(r*(f*x-d*p)-h*(a*x-o*p)+v*(a*d-o*f)),t[2]=r*(s*x-l*p)-u*(a*x-o*p)+v*(a*l-o*s),t[3]=-(r*(s*d-l*f)-u*(a*d-o*f)+h*(a*l-o*s)),t[4]=-(i*(f*x-d*p)-c*(s*x-l*p)+M*(s*d-l*f)),t[5]=e*(f*x-d*p)-c*(a*x-o*p)+M*(a*d-o*f),t[6]=-(e*(s*x-l*p)-i*(a*x-o*p)+M*(a*l-o*s)),t[7]=e*(s*d-l*f)-i*(a*d-o*f)+c*(a*l-o*s),t[8]=i*(h*x-d*v)-c*(u*x-l*v)+M*(u*d-l*h),t[9]=-(e*(h*x-d*v)-c*(r*x-o*v)+M*(r*d-o*h)),t[10]=e*(u*x-l*v)-i*(r*x-o*v)+M*(r*l-o*u),t[11]=-(e*(u*d-l*h)-i*(r*d-o*h)+c*(r*l-o*u)),t[12]=-(i*(h*p-f*v)-c*(u*p-s*v)+M*(u*f-s*h)),t[13]=e*(h*p-f*v)-c*(r*p-a*v)+M*(r*f-a*h),t[14]=-(e*(u*p-s*v)-i*(r*p-a*v)+M*(r*s-a*u)),t[15]=e*(u*f-s*h)-i*(r*f-a*h)+c*(r*s-a*u),t},a.SIMD.adjoint=function(t,n){var e,r,a,o,i,u,s,l,c,h,f,d,M,e=SIMD.Float32x4.load(n,0),r=SIMD.Float32x4.load(n,4),a=SIMD.Float32x4.load(n,8),o=SIMD.Float32x4.load(n,12);return c=SIMD.Float32x4.shuffle(e,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(e,r,2,3,6,7),l=SIMD.Float32x4.shuffle(a,o,2,3,6,7),s=SIMD.Float32x4.shuffle(c,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,c,1,3,5,7),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.mul(u,c),f=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),h),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(u,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,M),t},a.adjoint=r.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],M=t[13],v=t[14],p=t[15];return(n*i-e*o)*(h*p-f*v)-(n*u-r*o)*(c*p-f*M)+(n*s-a*o)*(c*v-h*M)+(e*u-r*i)*(l*p-f*d)-(e*s-a*i)*(l*v-h*d)+(r*s-a*u)*(l*M-c*d)},a.SIMD.multiply=function(t,n,e){var r=SIMD.Float32x4.load(n,0),a=SIMD.Float32x4.load(n,4),o=SIMD.Float32x4.load(n,8),i=SIMD.Float32x4.load(n,12),u=SIMD.Float32x4.load(e,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(e,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var h=SIMD.Float32x4.load(e,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var d=SIMD.Float32x4.load(e,12),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,M),t},a.scalar.multiply=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],M=n[11],v=n[12],p=n[13],x=n[14],m=n[15],S=e[0],I=e[1],y=e[2],D=e[3];return t[0]=S*r+I*u+y*h+D*v,t[1]=S*a+I*s+y*f+D*p,t[2]=S*o+I*l+y*d+D*x,t[3]=S*i+I*c+y*M+D*m,S=e[4],I=e[5],y=e[6],D=e[7],t[4]=S*r+I*u+y*h+D*v,t[5]=S*a+I*s+y*f+D*p,t[6]=S*o+I*l+y*d+D*x,t[7]=S*i+I*c+y*M+D*m,S=e[8],I=e[9],y=e[10],D=e[11],t[8]=S*r+I*u+y*h+D*v,t[9]=S*a+I*s+y*f+D*p,t[10]=S*o+I*l+y*d+D*x,t[11]=S*i+I*c+y*M+D*m,S=e[12],I=e[13],y=e[14],D=e[15],t[12]=S*r+I*u+y*h+D*v,t[13]=S*a+I*s+y*f+D*p,t[14]=S*o+I*l+y*d+D*x,t[15]=S*i+I*c+y*M+D*m,t},a.multiply=r.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,n,e){var r,a,o,i,u,s,l,c,h,f,d,M,v=e[0],p=e[1],x=e[2];return n===t?(t[12]=n[0]*v+n[4]*p+n[8]*x+n[12],t[13]=n[1]*v+n[5]*p+n[9]*x+n[13],t[14]=n[2]*v+n[6]*p+n[10]*x+n[14],t[15]=n[3]*v+n[7]*p+n[11]*x+n[15]):(r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],M=n[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=M,t[12]=r*v+u*p+h*x+n[12],t[13]=a*v+s*p+f*x+n[13],t[14]=o*v+l*p+d*x+n[14],t[15]=i*v+c*p+M*x+n[15]),t},a.SIMD.translate=function(t,n,e){var r=SIMD.Float32x4.load(n,0),a=SIMD.Float32x4.load(n,4),o=SIMD.Float32x4.load(n,8),i=SIMD.Float32x4.load(n,12),u=SIMD.Float32x4(e[0],e[1],e[2],0);n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(r,SIMD.Float32x4.add(a,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,s),t},a.translate=r.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},a.SIMD.scale=function(t,n,e){var r,a,o,i=SIMD.Float32x4(e[0],e[1],e[2],0);return r=SIMD.Float32x4.load(n,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),a=SIMD.Float32x4.load(n,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(n,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},a.scale=r.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,n,e,a){var o,i,u,s,l,c,h,f,d,M,v,p,x,m,S,I,y,D,b,F,w,g,_,E,P=a[0],z=a[1],R=a[2],A=Math.sqrt(P*P+z*z+R*R);return Math.abs(A)<r.EPSILON?null:(A=1/A,P*=A,z*=A,R*=A,o=Math.sin(e),i=Math.cos(e),u=1-i,s=n[0],l=n[1],c=n[2],h=n[3],f=n[4],d=n[5],M=n[6],v=n[7],p=n[8],x=n[9],m=n[10],S=n[11],I=P*P*u+i,y=z*P*u+R*o,D=R*P*u-z*o,b=P*z*u-R*o,F=z*z*u+i,w=R*z*u+P*o,g=P*R*u+z*o,_=z*R*u-P*o,E=R*R*u+i,t[0]=s*I+f*y+p*D,t[1]=l*I+d*y+x*D,t[2]=c*I+M*y+m*D,t[3]=h*I+v*y+S*D,t[4]=s*b+f*F+p*w,t[5]=l*b+d*F+x*w,t[6]=c*b+M*F+m*w,t[7]=h*b+v*F+S*w,t[8]=s*g+f*_+p*E,t[9]=l*g+d*_+x*E,t[10]=c*g+M*_+m*E,t[11]=h*g+v*_+S*E,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},a.scalar.rotateX=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],i=n[5],u=n[6],s=n[7],l=n[8],c=n[9],h=n[10],f=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+l*r,t[5]=i*a+c*r,t[6]=u*a+h*r,t[7]=s*a+f*r,t[8]=l*a-o*r,t[9]=c*a-i*r,t[10]=h*a-u*r,t[11]=f*a-s*r,t},a.SIMD.rotateX=function(t,n,e){var r=SIMD.Float32x4.splat(Math.sin(e)),a=SIMD.Float32x4.splat(Math.cos(e));n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);var o=SIMD.Float32x4.load(n,4),i=SIMD.Float32x4.load(n,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateX=r.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],s=n[3],l=n[8],c=n[9],h=n[10],f=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-l*r,t[1]=i*a-c*r,t[2]=u*a-h*r,t[3]=s*a-f*r,t[8]=o*r+l*a,t[9]=i*r+c*a,t[10]=u*r+h*a,t[11]=s*r+f*a,t},a.SIMD.rotateY=function(t,n,e){var r=SIMD.Float32x4.splat(Math.sin(e)),a=SIMD.Float32x4.splat(Math.cos(e));n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);var o=SIMD.Float32x4.load(n,0),i=SIMD.Float32x4.load(n,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,a))),t},a.rotateY=r.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],s=n[3],l=n[4],c=n[5],h=n[6],f=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+l*r,t[1]=i*a+c*r,t[2]=u*a+h*r,t[3]=s*a+f*r,t[4]=l*a-o*r,t[5]=c*a-i*r,t[6]=h*a-u*r,t[7]=f*a-s*r,t},a.SIMD.rotateZ=function(t,n,e){var r=SIMD.Float32x4.splat(Math.sin(e)),a=SIMD.Float32x4.splat(Math.cos(e));n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);var o=SIMD.Float32x4.load(n,0),i=SIMD.Float32x4.load(n,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateZ=r.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,n,e){var a,o,i,u=e[0],s=e[1],l=e[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,a=Math.sin(n),o=Math.cos(n),i=1-o,t[0]=u*u*i+o,t[1]=s*u*i+l*a,t[2]=l*u*i-s*a,t[3]=0,t[4]=u*s*i-l*a,t[5]=s*s*i+o,t[6]=l*s*i+u*a,t[7]=0,t[8]=u*l*i+s*a,t[9]=s*l*i-u*a,t[10]=l*l*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,s=a+a,l=o+o,c=r*u,h=r*s,f=r*l,d=a*s,M=a*l,v=o*l,p=i*u,x=i*s,m=i*l;return t[0]=1-(d+v),t[1]=h+m,t[2]=f-x,t[3]=0,t[4]=h-m,t[5]=1-(c+v),t[6]=M+p,t[7]=0,t[8]=f+x,t[9]=M-p,t[10]=1-(c+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},a.getRotation=function(t,n){var e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t},a.fromRotationTranslationScale=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],s=a+a,l=o+o,c=i+i,h=a*s,f=a*l,d=a*c,M=o*l,v=o*c,p=i*c,x=u*s,m=u*l,S=u*c,I=r[0],y=r[1],D=r[2];return t[0]=(1-(M+p))*I,t[1]=(f+S)*I,t[2]=(d-m)*I,t[3]=0,t[4]=(f-S)*y,t[5]=(1-(h+p))*y,t[6]=(v+x)*y,t[7]=0,t[8]=(d+m)*D,t[9]=(v-x)*D,t[10]=(1-(h+M))*D,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,n,e,r,a){var o=n[0],i=n[1],u=n[2],s=n[3],l=o+o,c=i+i,h=u+u,f=o*l,d=o*c,M=o*h,v=i*c,p=i*h,x=u*h,m=s*l,S=s*c,I=s*h,y=r[0],D=r[1],b=r[2],F=a[0],w=a[1],g=a[2];return t[0]=(1-(v+x))*y,t[1]=(d+I)*y,t[2]=(M-S)*y,t[3]=0,t[4]=(d-I)*D,t[5]=(1-(f+x))*D,t[6]=(p+m)*D,t[7]=0,t[8]=(M+S)*b,t[9]=(p-m)*b,t[10]=(1-(f+v))*b,t[11]=0,t[12]=e[0]+F-(t[0]*F+t[4]*w+t[8]*g),t[13]=e[1]+w-(t[1]*F+t[5]*w+t[9]*g),t[14]=e[2]+g-(t[2]*F+t[6]*w+t[10]*g),t[15]=1,t},a.fromQuat=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,s=a+a,l=e*i,c=r*i,h=r*u,f=a*i,d=a*u,M=a*s,v=o*i,p=o*u,x=o*s;return t[0]=1-h-M,t[1]=c+x,t[2]=f-p,t[3]=0,t[4]=c-x,t[5]=1-l-M,t[6]=d+v,t[7]=0,t[8]=f+p,t[9]=d-v,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,n,e,r,a,o,i){var u=1/(e-n),s=1/(a-r),l=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(a+r)*s,t[10]=(i+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*l,t[15]=0,t},a.perspective=function(t,n,e,r,a){var o=1/Math.tan(n/2),i=1/(r-a);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*l*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t},a.ortho=function(t,n,e,r,a,o,i){var u=1/(n-e),s=1/(r-a),l=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(n+e)*u,t[13]=(a+r)*s,t[14]=(i+o)*l,t[15]=1,t},a.lookAt=function(t,n,e,o){var i,u,s,l,c,h,f,d,M,v,p=n[0],x=n[1],m=n[2],S=o[0],I=o[1],y=o[2],D=e[0],b=e[1],F=e[2];return Math.abs(p-D)<r.EPSILON&&Math.abs(x-b)<r.EPSILON&&Math.abs(m-F)<r.EPSILON?a.identity(t):(f=p-D,d=x-b,M=m-F,v=1/Math.sqrt(f*f+d*d+M*M),f*=v,d*=v,M*=v,i=I*M-y*d,u=y*f-S*M,s=S*d-I*f,v=Math.sqrt(i*i+u*u+s*s),v?(v=1/v,i*=v,u*=v,s*=v):(i=0,u=0,s=0),l=d*s-M*u,c=M*i-f*s,h=f*u-d*i,v=Math.sqrt(l*l+c*c+h*h),v?(v=1/v,l*=v,c*=v,h*=v):(l=0,c=0,h=0),t[0]=i,t[1]=l,t[2]=f,t[3]=0,t[4]=u,t[5]=c,t[6]=d,t[7]=0,t[8]=s,t[9]=h,t[10]=M,t[11]=0,t[12]=-(i*p+u*x+s*m),t[13]=-(l*p+c*x+h*m),t[14]=-(f*p+d*x+M*m),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t},a.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t},a.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},a.equals=function(t,n){var e=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],M=t[11],v=t[12],p=t[13],x=t[14],m=t[15],S=n[0],I=n[1],y=n[2],D=n[3],b=n[4],F=n[5],w=n[6],g=n[7],_=n[8],E=n[9],P=n[10],z=n[11],R=n[12],A=n[13],T=n[14],L=n[15];return Math.abs(e-S)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(a-I)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(o-y)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(i-D)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(D))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-F)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(F))&&Math.abs(l-w)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(h-_)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(f-E)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(d-P)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(M-z)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(z))&&Math.abs(v-R)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(p-A)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(x-T)<=r.EPSILON*Math.max(1,Math.abs(x),Math.abs(T))&&Math.abs(m-L)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))},t.exports=a},function(t,n,e){var r=e(1),a=e(9),o=e(10),i=e(11),u={};u.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),n=o.fromValues(1,0,0),e=o.fromValues(0,1,0);return function(r,a,i){var s=o.dot(a,i);return s<-.999999?(o.cross(t,n,a),o.length(t)<1e-6&&o.cross(t,e,a),o.normalize(t,t),u.setAxisAngle(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var t=a.create();return function(n,e,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],u.normalize(n,u.fromMat3(n,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t},u.getAxisAngle=function(t,n){var e=2*Math.acos(n[3]),r=Math.sin(e/2);return 0!=r?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e},u.add=i.add,u.multiply=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],s=e[1],l=e[2],c=e[3];return t[0]=r*c+i*u+a*l-o*s,t[1]=a*c+i*s+o*u-r*l,t[2]=o*c+i*l+r*s-a*u,t[3]=i*c-r*u-a*s-o*l,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),s=Math.cos(e);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t},u.rotateY=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),s=Math.cos(e);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t},u.rotateZ=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),s=Math.cos(e);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},u.calculateW=function(t,n){var e=n[0],r=n[1],a=n[2];return t[0]=e,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-a*a)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,n,e,r){var a,o,i,u,s,l=n[0],c=n[1],h=n[2],f=n[3],d=e[0],M=e[1],v=e[2],p=e[3];return o=l*d+c*M+h*v+f*p,o<0&&(o=-o,d=-d,M=-M,v=-v,p=-p),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i):(u=1-r,s=r),t[0]=u*l+s*d,t[1]=u*c+s*M,t[2]=u*h+s*v,t[3]=u*f+s*p,t},u.sqlerp=function(){var t=u.create(),n=u.create();return function(e,r,a,o,i,s){return u.slerp(t,r,i,s),u.slerp(n,a,o,s),u.slerp(e,t,n,2*s*(1-s)),e}}(),u.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},u.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,n){var e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[5]-n[7])*e,t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;e=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*i+i]+1),t[a]=.5*e,e=.5/e,t[3]=(n[3*o+i]-n[3*i+o])*e,t[o]=(n[3*o+a]+n[3*a+o])*e,t[i]=(n[3*i+a]+n[3*a+i])*e}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,n,e){var r=e(1),a={};a.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var n=new r.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},a.fromValues=function(t,n){var e=new r.ARRAY_TYPE(2);return e[0]=t,e[1]=n,e},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},a.set=function(t,n,e){return t[0]=n,t[1]=e,t},a.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},a.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t},a.sub=a.subtract,a.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t},a.mul=a.multiply,a.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t},a.div=a.divide,a.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},a.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},a.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},a.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},a.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},a.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},a.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t},a.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)},a.dist=a.distance,a.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r},a.sqrDist=a.squaredDistance,a.length=function(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)},a.len=a.length,a.squaredLength=function(t){var n=t[0],e=t[1];return n*n+e*e},a.sqrLen=a.squaredLength,a.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},a.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},a.normalize=function(t,n){var e=n[0],r=n[1],a=e*e+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a),t},a.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},a.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},a.lerp=function(t,n,e,r){var a=n[0],o=n[1];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t},a.random=function(t,n){n=n||1;var e=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},a.transformMat2=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a,t[1]=e[1]*r+e[3]*a,t},a.transformMat2d=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a+e[4],t[1]=e[1]*r+e[3]*a+e[5],t},a.transformMat3=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[3]*a+e[6],t[1]=e[1]*r+e[4]*a+e[7],t},a.transformMat4=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[4]*a+e[12],t[1]=e[1]*r+e[5]*a+e[13],t},a.forEach=function(){var t=a.create();return function(n,e,r,a,o,i){var u,s;for(e||(e=2),r||(r=0),s=a?Math.min(a*e+r,n.length):n.length,u=r;u<s;u+=e)t[0]=n[u],t[1]=n[u+1],o(t,t,i),n[u]=t[0],n[u+1]=t[1];return n}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},a.equals=function(t,n){var e=t[0],a=t[1],o=n[0],i=n[1];return Math.abs(e-o)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(a-i)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))},t.exports=a},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=function(){function t(n){r(this,t),this.scene=n,this.camera=n.camera,this.width=n.width,this.height=n.height,this.mouse={x:0,y:0},this.dragRotation={x:0,y:0},this.zoom=30,this.drag=!1,this.initEvents()}return a(t,[{key:"initEvents",value:function(){function t(t,n){this.mouse.x=2*(t.clientX/this.width-.5),this.mouse.y=2*(t.clientY/this.height-.5);var r=this.mouse.x-e.x,a=this.mouse.y-e.y;this.drag&&(this.dragRotation.x+=1.5*r,this.dragRotation.y+=1.5*a,this.dragRotation.y=Math.min(Math.max(this.dragRotation.y,-Math.PI/4),Math.PI/4)),e.x=this.mouse.x,e.y=this.mouse.y}var n=this,e={x:0,y:0};window.addEventListener("mousemove",t.bind(this)),window.addEventListener("mousedown",function(){n.drag=!0}),window.addEventListener("mouseup",function(){n.drag=!1}),window.addEventListener("wheel",function(t){n.zoom+=t.deltaY/10,n.zoom=Math.min(Math.max(n.zoom,10),50)})}},{key:"update",value:function(){this.camera.position[0]=Math.cos(this.dragRotation.x)*this.zoom,this.camera.position[1]=Math.sin(this.dragRotation.y)*this.zoom,this.camera.position[2]=Math.sin(this.dragRotation.x)*this.zoom}}]),t}();n.default=o},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=e(3),i=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(){r(this,t),this.textures={},this.currentUnit=0}return a(t,[{key:"init",value:function(t){this.scene=t,this.gl=t.gl}},{key:"load",value:function(t,n){var e=this,r=new Image;return r.onload=function(){var t=e.initTexture(r);e.textures[n].texture=t,e.textures[n].unit=e.currentUnit,e.currentUnit++,e.textures[n].defer.resolve(t)},r.src=t,this.textures[n]={img:r,defer:i.default.defer()},this.textures[n].defer.promise}},{key:"initTexture",value:function(t){var n=this.gl,e=n.createTexture();return n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e}},{key:"getTexture",value:function(t){if(this.textures[t].texture)return this.textures[t].texture}},{key:"getTextureUnit",value:function(t){if(this.textures[t].unit)return this.textures[t].unit}}]),t}(),s=new u;n.default=s}]);